mixin PostView(post, maxWords, samePage)
  if (!maxWords)
    - maxWords = 0;

  .ui.fluid.card
    .content
      include ../partials/influence
      img.right.floated.mini.ui.avatar(src="https://thecatapi.com/api/images/get?format=src&type=gif")
      .header
        a(href="/posts/#{post._id}") #{post.name}
      .meta
        a(href="/posts/#{post._id}")
          abbr.date.tooltipped(title="#{ moment( post.created ).format('MMMM Do YYYY, h:mm:ss a') }") #{ moment( post.created ).fromNow() }
        | by 
        a.user(href="/people/#{post._author.slug}") #{post._author.username}
        if (post.hashcash)
          | at 
          abbr.tooltipped(title="We require a proof-of-work for posting content on Converse.  Your computer performs a complex calculation that, once it meets a certain threshold (the difficulty score), allows your content to be posted.") difficulty #{post.hashcash.split(':')[1]}
      if (!!+maxWords)
        .description(style="clear: none;") #{ post.description.split('\n')[0].split(' ').slice(0, maxWords).join(' ') }&hellip;
      else
        .description(style="clear: none;") !{ markdown(post.description) }
    
    //-.extra.content
      .ui.buttons
        a.ui.button
          i.icon.usd
          | tip #{post._author.username} for sharing
        .or
        a.ui.button
          i.icon.usd
          | tip SomeOtherGuy for writing
        
    if (post._document)
      .extra.content
        .ui.items
          .item
            if (!!+maxWords)
              .content
                .header
                  a(href="#{post._document.url}")
                    i.icon.linkify
                    | #{post._document.title} 
                  code(style="font-weight: normal; font-size: 0.65em; color: rgba(0,0,0,.5);") #{post._document.url}
                  a.mini.ui.right.floated.primary.button(href="/posts/#{post._id}")
                    i.icon.linkify
                    | Read More
                    i.icon.right.chevron
            else
              .image
                img(src="https://thecatapi.com/api/images/get?format=src")
              .content
                a.header(href="#{post._document.url}") #{post._document.title}
                .description #{post._document.description}
                .extra
                  a.ui.right.floated.primary.button(href="#{post._document.url}")
                    | Read More
                    i.icon.right.chevron
                  code(style="word-wrap: break-word;") #{post._document.url}
        
    .extra.content
      code(style="word-wrap: break-word;") #{post.hashcash}

    .ui.two.bottom.attached.buttons
      a.ui.button(href="/posts/#{post._id}#comments")
        i.comment.icon
        | #{post.stats.comments || 0} comments
      a.ui.button(href="/posts/#{post._id}#comment", data-intent="#{(samePage) ? 'comment' : undefined}")
        i.reply.icon
        | reply
